<!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8'>
	<meta name="viewport" content="user-scalable=no, width=device-width"  />
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	
	  
	<title>vitrum/v-test @ GitHub GLS API test</title>
	<link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet">
	<link href="http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css" rel="stylesheet">
	<link href="http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.css" rel="stylesheet">
	
	<script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.js"></script>
	<script type="text/javascript" src="js/bootstrap-widgets.js"></script>
	<!--
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.js"></script>

	<script type="text/javascript" src="js/bootstrap-modal.js"></script>
	<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
	-->
    
    <script src="http://twitter.github.com/bootstrap/assets/js/jquery.js"></script>

    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-transition.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-alert.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-modal.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-dropdown.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-scrollspy.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-tab.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-tooltip.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-popover.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-button.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-collapse.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-carousel.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-typeahead.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/application.js"></script>
	

	<style>
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .input-xlarge { font-size: 16px;}
	</style>
</head>

<body >
	
<!-- Navbar
    ================================================== -->
    <div class="navbar navbar-fixed-top" id="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="####">GLS iOS API Tools</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li class="active">
                <a href="####" class="platrom">Test Platform</a>
              </li>
              <li class="divider-vertical"></li>
              <li class="">
                <a href="####" class="doc">API Document</a>
              </li>

              <li class="divider-vertical"></li>
              <li class="">
                <a href="####" class="testacc">Test Accounts</a>
              </li>
              <li class="">
                <a href="####" class="code">Code Examples</a>
              </li>
              <li class="">
                <a class="editor" href="####" >JSON Editor</a>
              </li>
              
              
              <li class="divider-vertical"></li>
              <li class="">
                <a href="####" class="aboutus">About Tool</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="container-fluid">
	  <div class="row-fluid">
		  <div class="well"><h1>GLS iOS API Test Platform</h1></div>
	  </div>
      <!-- Main hero unit for a primary marketing message or call to action -->
      <div class="row-fluid">
        <div class="span4">

			<form class="form-horizontal well">
				<fieldset>
				  <legend>提交信息设置</legend>

				  <div class="control-group">
					<label class="control-label" for="format">返回结果：</label>
					<div class="controls">
					  <select id="format" class="span2">
						<option value="json" select="select">json</option>
						<option value="xml">XML</option>
					  </select>
					</div>
				  </div>
				  <!--<div class="control-group">
					<label class="control-label" for="apiCategoryId">接口栏目：</label>
					<div class="controls">
					  <select id="apiCategoryId" class="span2">
						<option>启动加载</option>
						<option>用户</option>
						<option>首页</option>
						<option>分类</option>
						<option>商品</option>
						<option>购物车</option>
						<option>结算中心</option>
						<option>我的魅力惠</option>
						<option>更多</option>
						<option>支付宝</option>
					  </select>
					</div>
				  </div>-->
				  <div class="control-group">
					<label class="control-label" for="sip_apiname">API 名称：</label>
					<div class="controls">
					  <select id="sip_apiname" class="span2" onchange="callgetParamListByApi(this);">.
						<option value="">请选择接口</option>
						<option value="index/version">1.1 版本检测</option>
						<option value="index/loading">1.2 获取加载页图片</option>
						<option value="index/device">1.3 提交DeviceToken</option>
						<option value="index/serverTime">1.4 获取服务器时间</option>
						<option value="customer/register">2.1用户注册</option>
						<option value="customer/login">2.2用户登录</option>
						<option value="customer/loginByThirdparty">2.3联合登录</option>
						<option value="customer/logout">2.4用户登出</option>
						<option value="home/index">3.1 首页活动 </option>
						<option value="category/list">4.1 分类列表</option>
						<option value="product/list">5.1 获取商品列表</option>
						<option value="product/filter">5.2 获取筛选条件</option>
						<option value="product/detail">5.3 商品详情接口</option>
						<option value="product/description">5.4 产品细节</option>
						<option value="product/review">5.5 获取用户体验</option>
						<option value="product/qa">5.6 获取Q&A信息</option>
						<option value="product/question">5.7 用户提问</option>
						<option value="product/stock">5.8 产品库存状态</option>
						<option value="cart/view">6.1 查看购物车</option>
						<option value="checkout/coupon">6.2 查看可用优惠券</option>
						<option value="checkout/info">7.1 查看结算中心信息</option>
						<option value="checkout/submitOrder">7.2 提交订单</option>
						<option value="checkout/saveInvoiceAddress">7.3 保存发票地址信息</option>
						<option value="myaccount/index">8.1我的魅力惠首页信息</option>
						<option value="myaccount/info">8.2 查看个人信息</option>
						<option value="myaccount/update">8.3 修改个人信息</option>
						<option value="myaccount/mailList">8.4 站内信列表</option>
						<option value="myaccount/mailDetail">8.5 获取站内信内容</option>
						<option value="myaccount/mailDelete">8.6 删除站内信</option>
						<option value="myaccount/orderList">8.7 查看订单列表</option>
						<option value="myaccount/orderDetail">8.8 订单详情</option>
						<option value="myaccount/orderCancel">8.9 取消订单</option>
						<option value="myaccount/waitComment">8.10 待评论商品列表</option>
						<option value="myaccount/addComment">8.11 添加商品评论</option>
						<option value="myaccount/commentList">8.12 我的评论</option>
						<option value="myaccount/addressList">8.13 地址列表</option>
						<option value="myaccount/addAddress">8.14 添加地址</option>
						<option value="myaccount/updateAddress">8.15 修改地址</option>
						<option value="myaccount/deleteAddress">8.16 删除地址</option>
						<option value="myaccount/defaultAddress">8.17 设置默认地址</option>
						<option value="myaccount/balance">8.18 查看账户余额</option>
						<option value="myaccount/coupon">8.19 查看优惠券</option>
						<option value="more/push">9.1 设置接收推送消息</option>
						<option value="more/feedback">9.2 提交反馈信息</option>
						<option value="more/help">9.3 获取帮助信息</option>
						<option value="payment/info">10.1获取交易信息</option>
					  </select>
					</div>
				  </div>
				  <div class="control-group">
					  <label for="format" class="control-label">测试期间数据环境：</label>
					  <div class="controls">
						  <input type="text" id="restIdtemp" name="restIdtemp" placeholder="Type something…" class="span2" value="www"  x-webkit-speech lang="zh-CN" >
						  <a href="#" class="help-inline" rel="popover" data-content="数据环境可以选：uji ,www, local 等" data-original-title="测试期间数据环境">备注</a>
					  </div>
				  </div>
				  <div class="control-group">
					  <h2 id="selectapi">请选择调试的接口</h2>
				  </div>
				  <div class="control-group" id="apibox">
						
				  </div>

				  <hr class="soften">
				  <div class="form-actions">
					<button type="submit" class="btn btn-primary span2" onclick="checkForm();return false;">测试</button>
					<!--<a href="####" class="btn span1" id="loadapilist" onclick="callgetApiList();return false;">Load API</a>-->
				  </div>
  				  <hr class="soften">
				  <div class="control-group">
					<label class="control-label" for="textarea">Temp post info</label>
					
					  <textarea class="input-xlarge span4" id="temptxt" rows="2"></textarea>
					
				  </div>
				</fieldset>
				
			</form>
		</div>
		<div class="span8">
			<div class="row well">
				<div class="postinfo">
					<div class="control-group">
						<label class="control-label" for="textarea">Post Info</label>
						<div class="controls ">
						  <textarea class="input-xlarge span6" id="param" rows="4" name="param"></textarea>
						</div>
					  </div>
				</div>
				<div class="getinfo">
					<div class="control-group">
						<label class="control-label" for="textarea">Return Info: <a class="editor" href="####" >JSON Editor</a></label>
						<div class="controls ">
						  <textarea class="input-xlarge span6" id="resultShow" rows="30" name="resultShow"></textarea>
						</div>
					  </div>
				</div>
			</div>
		</div>
		
      </div>
      <pre class="prettyprint linenums">$('#myModal').modal(options)</pre>
      
      <a data-toggle="modal" href="#myEditer" class="btn btn-primary btn-large">Launch demo modal</a>
      <div class="modal hide fade" id="myModal">
		  <div class="modal-header">
			<a class="close" data-dismiss="modal">×</a>
			<h3>提醒信息</h3>
		  </div>
		  <div class="modal-body">
			<p>请选择调试的接口…</p>
		  </div>
		  <div class="modal-footer">
			<a href="#" class="btn btn-primary"  data-dismiss="modal" >确定</a>
			<!--<a href="#" class="btn btn-primary">Save changes</a>-->
		  </div>
		</div>
		<div class="modal hide fade" id="myLoad">
		  <div class="modal-header">
			<a class="close" data-dismiss="modal">×</a>
			<h3>接口信息提交中</h3>
		  </div>
		  <div class="modal-body">
			<p>请稍侯…</p>
			<div class="progress progress-striped
				 active">
			  <div class="bar"
				   style="width: 10%;"></div>
			</div>
		  </div>
		  <div class="modal-footer">
			<!--<a href="#" class="btn btn-primary"  data-dismiss="modal" >确定</a>
			<a href="#" class="btn btn-primary">Save changes</a>-->
		  </div>
		</div>
		<div class="modal hide" id="myEditer">
		  <div class="modal-header">
			<a class="close" data-dismiss="modal">×</a>
			<h3>JSON在线编辑器</h3>
		  </div>
		  <div class="modal-body">
			<iframe src="http://www.thomasfrank.se/downloadableJS/JSONeditor_example.html" class="span12" height="560" id="iEditer" name="iEditer" ></iframe>
		  </div>
		  <div class="modal-footer">
			<a href="#" class="btn btn-primary"  data-dismiss="modal" >确定</a>
			<!--<a href="#" class="btn btn-primary">Save changes</a>-->
		  </div>
		</div>
<a href="#" class="btn btn-danger" rel="popover" data-content="And here's some amazing content. It's very engaging. right?" data-original-title="A Title">hover for popover</a>
  </div>  

<script>

//API数组
var JSON;
var apitxt;
if (!JSON) {
    JSON = {};
}
var apiListUrl = 'api-tools-list.json';
var eventtimes = null;
var sip_apiname = {};

//获取API参数数组
	function callgetApiList() {
		var request = jQuery.ajax({
		  type: "GET",
		  url: apiListUrl
		});
		request.done(function(msg) {
			JSON = eval('(' + msg + ')');
			apitxt = msg;
		});
	}

//根据不同的API来显示该API需要传递的参数
	function callgetParamListByApi(o) {
		var $form = jQuery( "form" ),
			term = $form.find( 'select[id="sip_apiname"]' ).val(),

			html = "";
			
		jQuery('#selectapi').text( term );
		jQuery('#apilist').text();
		jQuery('#apibox').html();
		
		if ( JSON[term] == undefined) {
			callgetApiList();
			jQuery('#apibox').html();
		} else {
			sip_apiname = JSON[term];
			jQuery('#resultShow').text( apitxt );
			var tempjson = JSON[term];

			jQuery.each(tempjson,function(){
				//alert(this.name + "," + this.values);
				html= html + '<div class="control-group '+ this.classname +'"><label for="format" class="control-label">'+ this.name +'：</label><div class="controls"><input type="text" id="'+ this.name +'" name="'+ this.name +'" placeholder="Type something…" class="span2" value="'+ this.values +'"  x-webkit-speech lang="zh-CN"><a href="#" class="help-inline" rel="popover" data-content="'+ this.desc +'/n 默认值为：'+ this.values +'" data-original-title="关于：'+ this.name +'">备注</a></div></div>'
			});
			jQuery('#apibox').html(html);

		}
	}
//提交API 访问
	function checkForm() {
		jQuery('#myLoad .bar').css( "width","5%" );
		jQuery('#myLoad').modal('show');

		var $form = jQuery( "form" ),
			term = $form.find( 'select[id="sip_apiname"]' ).val(),
			temptxt = "&" + $form.find( 'textarea[id="temptxt"]' ).val(),
			restIdtemp = $form.find( 'input[id="restIdtemp"]' ).val(),
			ApiRoot = "http://" + restIdtemp + ".glamour-sales.com.cn/mobile/",
			postdate = "",
			paramString = "",
			url = ApiRoot + term ;
			
		jQuery('#myLoad .bar').animate( { width: "30%" } , 1600 );

		if ( term == "") {
			
			return false;
		}
		
		if ( sip_apiname == undefined ){
			
			postdate = "testToken=20120315&timeStamp=123456&" + temptxt ;
		}else{
			jQuery('#myModal .bar').animate( { width: "70%" } , 2200 );
			jQuery.each(sip_apiname,function(){
				paramString += this.name + '=' + document.getElementById(this.name).value + '&';
			});
			postdate = "testToken=20120315&" + paramString + temptxt ;
		}

		document.getElementById('resultShow').value ="";
		document.getElementById('param').value = "post url:" + url + '\n\n' + "postdate:" +postdate;
		jQuery('#myLoad .bar').animate( { width: "85%" } , 1000 );
		var request = jQuery.ajax({
		  type: "POST",
		  url: url,
		  data: postdate
		  
		});
		request.done(function(msg) {
		  jQuery('#myLoad .bar').animate( { width: "100%" } , 700 );
		  document.getElementById('resultShow').value = msg;
		  
			var eventtimes = null;

			eventtimes = setTimeout(function(){
				jQuery('#myLoad').modal('hide');
			},3000);
		});
			if(eventtimes){
                    clearTimeout(eventtimes);
            }
	}

jQuery(document).ready(function() {
	//alert("jquery");
	var $form = jQuery( "form" ),
		term = $form.find( 'select[id="sip_apiname"]' ).val(),
		sip_apiname = "";
		
	if ( JSON[term] == undefined) {
		callgetApiList();
	} 
	prettyPrint();
	
	jQuery(".editor").click( function () { 
		jQuery('#myEditer').modal({
			backdrop: true,
			keyboard: true
		}).css({
			width: 'auto',
			height: '580px',
			'margin-left': function () {
				return -($(this).width() / 2);
			}
		});
		jQuery(window.frames["iEditer"].document).find("textarea").text='我想变成她一天的一部分';
	 });


});
</script>
</body>
</html>
